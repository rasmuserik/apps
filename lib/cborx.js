(()=>{"use strict";var e={};let t,r,n;(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);try{t=new TextDecoder}catch(e){}let s=0;const i=[],o=57342,a=57343,l=57337,u={};let f,c,d,h,y,p,g,b=i,w=0,m={},A=0,v=0,k=[],U=[],M={useRecords:!1,mapsAsObjects:!0},O=!1,S=2;try{new Function("")}catch(e){S=1/0}class j{constructor(e){if(e&&(!e.keyMap&&!e._keyMap||e.useRecords||(e.useRecords=!1,e.mapsAsObjects=!0),!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[t,r]of Object.entries(e.keyMap))this.mapKey.set(r,t)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let t=new Map;for(let[r,n]of Object.entries(e))t.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,n);return t}decodeKeys(e){if(!this._keyMap||"Map"!=e.constructor.name)return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let t={};return e.forEach(((e,r)=>t[B(this._mapKey.has(r)?this._mapKey.get(r):r)]=e)),t}mapDecode(e,t){let r=this.decode(e);return this._keyMap&&"Array"===r.constructor.name?r.map((e=>this.decodeKeys(e))):r}decode(e,t){if(r)return G((()=>(Q(),this?this.decode(e,t):j.prototype.decode.call(M,e,t))));n=t>-1?t:e.length,s=0,w=0,v=0,c=null,b=i,d=null,r=e;try{p=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(r=null,e instanceof Uint8Array)throw t;throw new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof j){if(m=this,y=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return f=this.structures,E();(!f||f.length>0)&&(f=[])}else m=M,(!f||f.length>0)&&(f=[]),y=null;return E()}decodeMultiple(e,t){let r,n=0;try{let i=e.length;O=!0;let o=this?this.decode(e,i):ne.decode(e,i);if(!t){for(r=[o];s<i;)n=s,r.push(E());return r}if(!1===t(o))return;for(;s<i;)if(n=s,!1===t(E()))return}catch(e){throw e.lastPosition=n,e.values=r,e}finally{O=!1,Q()}}}function E(){try{let e=I();if(d){if(s>=d.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}s=d.postBundlePosition,d=null}if(s==n)f=null,r=null,h&&(h=null);else{if(s>n){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}if(!O)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw Q(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function I(){let e=r[s++],t=e>>5;if(e&=31,e>23)switch(e){case 24:e=r[s++];break;case 25:if(7==t)return function(){let e=r[s++],t=r[s++],n=(127&e)>>2;if(31===n)return t||3&e?NaN:128&e?-1/0:1/0;if(0===n){let r=((3&e)<<8|t)/(1<<24);return 128&e?-r:r}return K[3]=128&e|56+(n>>1),K[2]=(7&e)<<5|t>>3,K[1]=t<<5,K[0]=0,F[0]}();e=p.getUint16(s),s+=2;break;case 26:if(7==t){let e=p.getFloat32(s);if(m.useFloat32>2){let t=X[(127&r[s])<<1|r[s+1]>>7];return s+=4,(t*e+(e>0?.5:-.5)>>0)/t}return s+=4,e}e=p.getUint32(s),s+=4;break;case 27:if(7==t){let e=p.getFloat64(s);return s+=8,e}if(t>1){if(p.getUint32(s)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=p.getUint32(s+4)}else m.int64AsNumber?(e=4294967296*p.getUint32(s),e+=p.getUint32(s+4)):e=p.getBigUint64(s);s+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e,r=[],n=0;for(;(e=I())!=u;)r[n++]=e;return 4==t?r:3==t?r.join(""):Buffer.concat(r);case 5:let s;if(m.mapsAsObjects){let e={};if(m.keyMap)for(;(s=I())!=u;)e[B(m.decodeKey(s))]=I();else for(;(s=I())!=u;)e[B(s)]=I();return e}{g&&(m.mapsAsObjects=!0,g=!1);let e=new Map;if(m.keyMap)for(;(s=I())!=u;)e.set(m.decodeKey(s),I());else for(;(s=I())!=u;)e.set(s,I());return e}case 7:return u;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return i=e,m.copyBuffers?Uint8Array.prototype.slice.call(r,s,s+=i):r.subarray(s,s+=i);case 3:if(v>=s)return c.slice(s-A,(s+=e)-A);if(0==v&&n<140&&e<32){let t=e<16?T(e):function(e){let t=s,n=new Array(e);for(let i=0;i<e;i++){const e=r[s++];if((128&e)>0)return void(s=t);n[i]=e}return P.apply(String,n)}(e);if(null!=t)return t}return _(e);case 4:let t=new Array(e);for(let r=0;r<e;r++)t[r]=I();return t;case 5:if(m.mapsAsObjects){let t={};if(m.keyMap)for(let r=0;r<e;r++)t[B(m.decodeKey(I()))]=I();else for(let r=0;r<e;r++)t[B(I())]=I();return t}{g&&(m.mapsAsObjects=!0,g=!1);let t=new Map;if(m.keyMap)for(let r=0;r<e;r++)t.set(m.decodeKey(I()),I());else for(let r=0;r<e;r++)t.set(I(),I());return t}case 6:if(e>=l){let t=f[8191&e];if(t)return t.read||(t.read=x(t)),t.read();if(e<65536){if(e==a){let e=Z(),t=I(),r=I();N(t,r);let n={};if(m.keyMap)for(let t=2;t<e;t++)n[B(m.decodeKey(r[t-2]))]=I();else for(let t=2;t<e;t++)n[B(r[t-2])]=I();return n}if(e==o){let e=Z(),t=I();for(let r=2;r<e;r++)N(t++,I());return I()}if(e==l)return function(){let e=Z(),t=s+I();for(let t=2;t<e;t++){let e=Z();s+=e}let r=s;return s=t,d=[R(Z()),R(Z())],d.position0=0,d.position1=0,d.postBundlePosition=s,s=r,I()}();if(m.getShared&&(q(),t=f[8191&e],t))return t.read||(t.read=x(t)),t.read()}}let u=k[e];if(u)return u.handlesRead?u(I):u(I());{let t=I();for(let r=0;r<U.length;r++){let n=U[r](e,t);if(void 0!==n)return n}return new D(t,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let t=(y||W())[e];if(void 0!==t)return t;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}throw new Error("Unknown CBOR token "+e)}var i}const V=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function x(e){return e.slowReads=0,function(){let e=r[s++];if(e&=31,e>23)switch(e){case 24:e=r[s++];break;case 25:e=p.getUint16(s),s+=2;break;case 26:e=p.getUint32(s),s+=4;break;default:throw new Error("Expected array header, but got "+r[s-1])}let t=this.compiledReader;for(;t;){if(t.propertyCount===e)return t(I);t=t.next}if(this.slowReads++>=S){let r=this.length==e?this:this.slice(0,e);return t=m.keyMap?new Function("r","return {"+r.map((e=>m.decodeKey(e))).map((e=>V.test(e)?B(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"):new Function("r","return {"+r.map((e=>V.test(e)?B(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"),this.compiledReader&&(t.next=this.compiledReader),t.propertyCount=e,this.compiledReader=t,t(I)}let n={};if(m.keyMap)for(let t=0;t<e;t++)n[B(m.decodeKey(this[t]))]=I();else for(let t=0;t<e;t++)n[B(this[t])]=I();return n}}function B(e){return"__proto__"===e?"__proto_":e}let _=R;function R(e){let n;if(e<16&&(n=T(e)))return n;if(e>64&&t)return t.decode(r.subarray(s,s+=e));const i=s+e,o=[];for(n="";s<i;){const e=r[s++];if(0==(128&e))o.push(e);else if(192==(224&e)){const t=63&r[s++];o.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&r[s++],n=63&r[s++];o.push((31&e)<<12|t<<6|n)}else if(240==(248&e)){let t=(7&e)<<18|(63&r[s++])<<12|(63&r[s++])<<6|63&r[s++];t>65535&&(t-=65536,o.push(t>>>10&1023|55296),t=56320|1023&t),o.push(t)}else o.push(e);o.length>=4096&&(n+=P.apply(String,o),o.length=0)}return o.length>0&&(n+=P.apply(String,o)),n}let P=String.fromCharCode;function T(e){if(e<4){if(e<2){if(0===e)return"";{let e=r[s++];return(128&e)>1?void(s-=1):P(e)}}{let t=r[s++],n=r[s++];if((128&t)>0||(128&n)>0)return void(s-=2);if(e<3)return P(t,n);let i=r[s++];return(128&i)>0?void(s-=3):P(t,n,i)}}{let t=r[s++],n=r[s++],i=r[s++],o=r[s++];if((128&t)>0||(128&n)>0||(128&i)>0||(128&o)>0)return void(s-=4);if(e<6){if(4===e)return P(t,n,i,o);{let e=r[s++];return(128&e)>0?void(s-=5):P(t,n,i,o,e)}}if(e<8){let a=r[s++],l=r[s++];if((128&a)>0||(128&l)>0)return void(s-=6);if(e<7)return P(t,n,i,o,a,l);let u=r[s++];return(128&u)>0?void(s-=7):P(t,n,i,o,a,l,u)}{let a=r[s++],l=r[s++],u=r[s++],f=r[s++];if((128&a)>0||(128&l)>0||(128&u)>0||(128&f)>0)return void(s-=8);if(e<10){if(8===e)return P(t,n,i,o,a,l,u,f);{let e=r[s++];return(128&e)>0?void(s-=9):P(t,n,i,o,a,l,u,f,e)}}if(e<12){let c=r[s++],d=r[s++];if((128&c)>0||(128&d)>0)return void(s-=10);if(e<11)return P(t,n,i,o,a,l,u,f,c,d);let h=r[s++];return(128&h)>0?void(s-=11):P(t,n,i,o,a,l,u,f,c,d,h)}{let c=r[s++],d=r[s++],h=r[s++],y=r[s++];if((128&c)>0||(128&d)>0||(128&h)>0||(128&y)>0)return void(s-=12);if(e<14){if(12===e)return P(t,n,i,o,a,l,u,f,c,d,h,y);{let e=r[s++];return(128&e)>0?void(s-=13):P(t,n,i,o,a,l,u,f,c,d,h,y,e)}}{let p=r[s++],g=r[s++];if((128&p)>0||(128&g)>0)return void(s-=14);if(e<15)return P(t,n,i,o,a,l,u,f,c,d,h,y,p,g);let b=r[s++];return(128&b)>0?void(s-=15):P(t,n,i,o,a,l,u,f,c,d,h,y,p,g,b)}}}}}let F=new Float32Array(1),K=new Uint8Array(F.buffer,0,4);new Array(4096);class D{constructor(e,t){this.value=e,this.tag=t}}k[0]=e=>new Date(e),k[1]=e=>new Date(Math.round(1e3*e)),k[2]=e=>{let t=BigInt(0);for(let r=0,n=e.byteLength;r<n;r++)t=BigInt(e[r])+t<<BigInt(8);return t},k[3]=e=>BigInt(-1)-k[2](e),k[4]=e=>+(e[1]+"e"+e[0]),k[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const N=(e,t)=>{let r=f[e-=57344];r&&r.isShared&&((f.restoreStructures||(f.restoreStructures=[]))[e]=r),f[e]=t,t.read=x(t)};k[105]=e=>{let t=e.length,r=e[1];N(e[0],r);let n={};for(let s=2;s<t;s++)n[B(r[s-2])]=e[s];return n},k[14]=e=>d?d[0].slice(d.position0,d.position0+=e):new D(e,14),k[15]=e=>d?d[1].slice(d.position1,d.position1+=e):new D(e,15);let C={Error,RegExp};k[27]=e=>(C[e[0]]||Error)(e[1],e[2]);const z=e=>{if(132!=r[s++])throw new Error("Packed values structure must be followed by a 4 element array");let t=e();return y=y?t.concat(y.slice(t.length)):t,y.prefixes=e(),y.suffixes=e(),e()};function L(e,t){return"string"==typeof e?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function W(){if(!y){if(!m.getShared)throw new Error("No packed values available");q()}return y}z.handlesRead=!0,k[51]=z,k[6]=e=>{if(!y){if(!m.getShared)return new D(e,6);q()}if("number"==typeof e)return y[16+(e>=0?2*e:-2*e-1)];throw new Error("No support for non-integer packed references yet")},k[28]=e=>{h||(h=new Map,h.id=0);let t,n=h.id++;t=r[s]>>5==4?[]:{};let i={target:t};h.set(n,i);let o=e();return i.used?Object.assign(t,o):(i.target=o,o)},k[28].handlesRead=!0,k[29]=e=>{let t=h.get(e);return t.used=!0,t.target},k[258]=e=>new Set(e),(k[259]=e=>(m.mapsAsObjects&&(m.mapsAsObjects=!1,g=!0),e())).handlesRead=!0,U.push(((e,t)=>e>=225&&e<=255?L(W().prefixes[e-224],t):e>=28704&&e<=32767?L(W().prefixes[e-28672],t):e>=1879052288&&e<=2147483647?L(W().prefixes[e-1879048192],t):e>=216&&e<=223?L(t,W().suffixes[e-216]):e>=27647&&e<=28671?L(t,W().suffixes[e-27639]):e>=1811940352&&e<=1879048191?L(t,W().suffixes[e-1811939328]):1399353956==e?{packedValues:y,structures:f.slice(0),version:t}:55799==e?t:void 0));const J=1==new Uint8Array(new Uint16Array([1]).buffer)[0],H=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],Y=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<H.length;e++)$(H[e],Y[e]);function $(e,t){let r,n="get"+e.name.slice(0,-5);"function"==typeof e?r=e.BYTES_PER_ELEMENT:e=null;for(let s=0;s<2;s++){if(!s&&1==r)continue;let i=2==r?1:4==r?2:3;k[s?t:t-4]=1==r||s==J?r=>{if(!e)throw new Error("Could not find typed array for code "+t);return new e(Uint8Array.prototype.slice.call(r,0).buffer)}:r=>{if(!e)throw new Error("Could not find typed array for code "+t);let o=new DataView(r.buffer,r.byteOffset,r.byteLength),a=r.length>>i,l=new e(a),u=o[n];for(let e=0;e<a;e++)l[e]=u.call(o,e<<i,s);return l}}}function Z(){let e=31&r[s++];if(e>23)switch(e){case 24:e=r[s++];break;case 25:e=p.getUint16(s),s+=2;break;case 26:e=p.getUint32(s),s+=4}return e}function q(){if(m.getShared){let e=G((()=>(r=null,m.getShared())))||{},t=e.structures||[];m.sharedVersion=e.version,y=m.sharedValues=e.packedValues,!0===f?m.structures=f=t:f.splice.apply(f,[0,t.length].concat(t))}}function G(e){let t=n,i=s,o=w,a=A,l=v,u=c,y=b,g=h,k=d,U=new Uint8Array(r.slice(0,n)),M=f,S=m,j=O,E=e();return n=t,s=i,w=o,A=a,v=l,c=u,b=y,h=g,d=k,r=U,O=j,f=M,m=S,p=new DataView(r.buffer,r.byteOffset,r.byteLength),E}function Q(){r=null,h=null,f=null}const X=new Array(147);for(let e=0;e<256;e++)X[e]=+("1e"+Math.floor(45.15-.30103*e));let ee,te,re,ne=new j({useRecords:!1});ne.decode,ne.decodeMultiple;try{ee=new TextEncoder}catch(e){}const se="object"==typeof globalThis&&globalThis.Buffer,ie=void 0!==se,oe=ie?se.allocUnsafeSlow:Uint8Array,ae=ie?se:Uint8Array,le=ie?4294967296:2144337920;let ue,fe,ce,de,he=0,ye=null;const pe=/[\u0080-\uFFFF]/,ge=Symbol("record-id");function be(e,t){e<24?fe[he++]=t|e:e<256?(fe[he++]=24|t,fe[he++]=e):e<65536?(fe[he++]=25|t,fe[he++]=e>>8,fe[he++]=255&e):(fe[he++]=26|t,ce.setUint32(he,e),he+=4)}class we{constructor(e,t,r){this.structures=e,this.packedValues=t,this.version=r}}function me(e){e<24?fe[he++]=128|e:e<256?(fe[he++]=152,fe[he++]=e):e<65536?(fe[he++]=153,fe[he++]=e>>8,fe[he++]=255&e):(fe[he++]=154,ce.setUint32(he,e),he+=4)}const Ae="undefined"==typeof Blob?function(){}:Blob;function ve(e){if(e instanceof Ae)return!0;let t=e[Symbol.toStringTag];return"Blob"===t||"File"===t}function ke(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let r=t.get(e);if(r)2==++r.count&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(e);r?r.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let r=0,n=e.length;r<n;r++)ke(e[r],t);else{let n=!t.encoder.useRecords;for(var r in e)e.hasOwnProperty(r)&&(n&&ke(r,t),ke(e[r],t))}break;case"function":console.log(e)}}const Ue=1==new Uint8Array(new Uint16Array([1]).buffer)[0];function Me(e,t){return!Ue&&t>1&&(e-=4),{tag:e,encode:function(e,t){let r=e.byteLength,n=e.byteOffset||0,s=e.buffer||e;t(ie?se.from(s,n,r):new Uint8Array(s,n,r))}}}function Oe(e,t){let r=e.byteLength;r<24?fe[he++]=64+r:r<256?(fe[he++]=88,fe[he++]=r):r<65536?(fe[he++]=89,fe[he++]=r>>8,fe[he++]=255&r):(fe[he++]=90,ce.setUint32(he,r),he+=4),he+r>=fe.length&&t(he+r),fe.set(e.buffer?e:new Uint8Array(e),he),he+=r}function Se(e,t){ce.setUint32(ye.position+e,he-ye.position-e+1);let r=ye;ye=null,t(r[0]),t(r[1])}re=[Date,Set,Error,RegExp,D,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array,we],te=[{tag:1,encode(e,t){let r=e.getTime()/1e3;(this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296?(fe[he++]=26,ce.setUint32(he,r),he+=4):(fe[he++]=251,ce.setFloat64(he,r),he+=8)}},{tag:258,encode(e,t){t(Array.from(e))}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag:e=>e.tag,encode(e,t){t(e.value)}},{encode(e,t,r){Oe(e,r)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||ie&&!1!==this.tagUint8Array))return 64},encode(e,t,r){Oe(e,r)}},Me(68,1),Me(69,2),Me(70,4),Me(71,8),Me(72,1),Me(77,2),Me(78,4),Me(79,8),Me(85,4),Me(86,8),{encode(e,t){let r=e.packedValues||[],n=e.structures||[];if(r.values.length>0){fe[he++]=216,fe[he++]=51,me(4);let e=r.values;t(e),me(0),me(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let t=0,r=e.length;t<r;t++)packedObjectMap[e[t]]=t}if(n){ce.setUint32(he,3655335424),he+=3;let r=n.slice(0);r.unshift(57344),r.push(new D(e.version,1399353956)),t(r)}else t(new D(e.version,1399353956))}}];let je=new class extends j{constructor(e){let t,r,n,s,i;super(e),this.offset=0,e=e||{};let o=ae.prototype.utf8Write?function(e,t,r){return fe.utf8Write(e,t,r)}:!(!ee||!ee.encodeInto)&&function(e,t){return ee.encodeInto(e,fe.subarray(t)).written},a=this,l=e.structures||e.saveStructures,u=e.maxSharedStructures;if(null==u&&(u=l?128:0),u>8190)throw new Error("Maximum maxSharedStructure is 8190");let f=e.sequential;f&&(u=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let c,d,h,y=e.sharedValues;if(y){h=Object.create(null);for(let e=0,t=y.length;e<t;e++)h[y[e]]=e}let p=[],g=0,b=0;this.mapEncode=function(e,t){return this._keyMap&&!this._mapped&&"Array"===e.constructor.name&&(e=e.map((e=>this.encodeKeys(e)))),this.encode(e,t)},this.encode=function(o,l){if(fe||(fe=new oe(8192),ce=new DataView(fe.buffer,0,8192),he=0),de=fe.length-10,de-he<2048?(fe=new oe(fe.length),ce=new DataView(fe.buffer,0,fe.length),de=fe.length-10,he=0):l===Be&&(he=he+7&2147483640),t=he,a.useSelfDescribedHeader&&(ce.setUint32(he,3654940416),he+=3),i=a.structuredClone?new Map:null,a.bundleStrings&&"string"!=typeof o?(ye=[],ye.size=1/0):ye=null,r=a.structures,r){if(r.uninitialized){let e=a.getShared()||{};a.structures=r=e.structures||[],a.sharedVersion=e.version;let t=a.sharedValues=e.packedValues;if(t){h={};for(let e=0,r=t.length;e<r;e++)h[t[e]]=e}}let e=r.length;if(e>u&&!f&&(e=u),!r.transitions){r.transitions=Object.create(null);for(let t=0;t<e;t++){let e=r[t];if(!e)continue;let n,s=r.transitions;for(let r=0,i=e.length;r<i;r++){void 0===s[ge]&&(s[ge]=t);let i=e[r];n=s[i],n||(n=s[i]=Object.create(null)),s=n}s[ge]=1048576|t}}f||(r.nextId=e)}if(n&&(n=!1),s=r||[],d=h,e.pack){let t=new Map;if(t.values=[],t.encoder=a,t.maxValues=e.maxPrivatePackedValues||(h?16:1/0),t.objectMap=h||!1,t.samplingPackedValues=c,ke(o,t),t.values.length>0){fe[he++]=216,fe[he++]=51,me(4);let e=t.values;w(e),me(0),me(0),d=Object.create(h||null);for(let t=0,r=e.length;t<r;t++)d[e[t]]=t}}ue=l&Re;try{if(ue)return;if(w(o),ye&&Se(t,w),a.offset=he,i&&i.idsToInsert){he+=2*i.idsToInsert.length,he>de&&A(he),a.offset=he;let e=function(e,t){let r,n=2*t.length,s=e.length-n;t.sort(((e,t)=>e.offset>t.offset?1:-1));for(let r=0;r<t.length;r++){let n=t[r];n.id=r;for(let t of n.references)e[t++]=r>>8,e[t]=255&r}for(;r=t.pop();){let t=r.offset;e.copyWithin(t+n,t,s),n-=2;let i=t+n;e[i++]=216,e[i++]=28,s=t}return e}(fe.subarray(t,he),i.idsToInsert);return i=null,e}return l&Be?(fe.start=t,fe.end=he,fe):fe.subarray(t,he)}finally{if(r)if(b<10&&b++,r.length>u&&(r.length=u),g>1e4)r.transitions=null,b=0,g=0,p.length>0&&(p=[]);else if(p.length>0&&!f){for(let e=0,t=p.length;e<t;e++)p[e][ge]=void 0;p=[]}if(n&&a.saveShared){a.structures.length>u&&(a.structures=a.structures.slice(0,u));let e=fe.subarray(t,he);return!1===a.updateSharedData()?a.encode(o):e}l&_e&&(he=t)}},this.findCommonStringsToPack=()=>(c=new Map,h||(h=Object.create(null)),e=>{let t=e&&e.threshold||4,r=this.pack?e.maxPrivatePackedValues||16:0;y||(y=this.sharedValues=[]);for(let[e,s]of c)s.count>t&&(h[e]=r++,y.push(e),n=!0);for(;this.saveShared&&!1===this.updateSharedData(););c=null});const w=r=>{he>de&&(fe=A(he));var n,s=typeof r;if("string"===s){if(d){let t=d[r];if(t>=0)return void(t<16?fe[he++]=t+224:(fe[he++]=198,w(1&t?15-t>>1:t-16>>1)));if(c&&!e.pack){let e=c.get(r);e?e.count++:c.set(r,{count:1})}}let s,i=r.length;if(ye&&i>=4&&i<1024){if((ye.size+=i)>61440){let e,r=(ye[0]?3*ye[0].length+ye[1].length:0)+10;he+r>de&&(fe=A(he+r)),fe[he++]=217,fe[he++]=223,fe[he++]=249,fe[he++]=ye.position?132:130,fe[he++]=26,e=he-t,he+=4,ye.position&&Se(t,w),ye=["",""],ye.size=0,ye.position=e}let e=pe.test(r);return ye[e?0:1]+=r,fe[he++]=e?206:207,void w(i)}s=i<32?1:i<256?2:i<65536?3:5;let a=3*i;if(he+a>de&&(fe=A(he+a)),i<64||!o){let e,t,o,a=he+s;for(e=0;e<i;e++)t=r.charCodeAt(e),t<128?fe[a++]=t:t<2048?(fe[a++]=t>>6|192,fe[a++]=63&t|128):55296==(64512&t)&&56320==(64512&(o=r.charCodeAt(e+1)))?(t=65536+((1023&t)<<10)+(1023&o),e++,fe[a++]=t>>18|240,fe[a++]=t>>12&63|128,fe[a++]=t>>6&63|128,fe[a++]=63&t|128):(fe[a++]=t>>12|224,fe[a++]=t>>6&63|128,fe[a++]=63&t|128);n=a-he-s}else n=o(r,he+s,a);n<24?fe[he++]=96|n:n<256?(s<2&&fe.copyWithin(he+2,he+1,he+1+n),fe[he++]=120,fe[he++]=n):n<65536?(s<3&&fe.copyWithin(he+3,he+2,he+2+n),fe[he++]=121,fe[he++]=n>>8,fe[he++]=255&n):(s<5&&fe.copyWithin(he+5,he+3,he+3+n),fe[he++]=122,ce.setUint32(he,n),he+=4),he+=n}else if("number"===s)if(this.alwaysUseFloat||r>>>0!==r)if(this.alwaysUseFloat||r>>0!==r){let e;if((e=this.useFloat32)>0&&r<4294967296&&r>=-2147483648){let t;if(fe[he++]=250,ce.setFloat32(he,r),e<4||(t=r*X[(127&fe[he])<<1|fe[he+1]>>7])>>0===t)return void(he+=4);he--}fe[he++]=251,ce.setFloat64(he,r),he+=8}else r>=-24?fe[he++]=31-r:r>=-256?(fe[he++]=56,fe[he++]=~r):r>=-65536?(fe[he++]=57,ce.setUint16(he,~r),he+=2):(fe[he++]=58,ce.setUint32(he,~r),he+=4);else r<24?fe[he++]=r:r<256?(fe[he++]=24,fe[he++]=r):r<65536?(fe[he++]=25,fe[he++]=r>>8,fe[he++]=255&r):(fe[he++]=26,ce.setUint32(he,r),he+=4);else if("object"===s)if(r){if(i){let e=i.get(r);if(e){if(fe[he++]=216,fe[he++]=29,fe[he++]=25,!e.references){let t=i.idsToInsert||(i.idsToInsert=[]);e.references=[],t.push(e)}return e.references.push(he-t),void(he+=2)}i.set(r,{offset:he-t})}let e=r.constructor;if(e===Object)m(r,!0);else if(e===Array){(n=r.length)<24?fe[he++]=128|n:me(n);for(let e=0;e<n;e++)w(r[e])}else if(e===Map)if((this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(fe[he++]=217,fe[he++]=1,fe[he++]=3),(n=r.size)<24?fe[he++]=160|n:n<256?(fe[he++]=184,fe[he++]=n):n<65536?(fe[he++]=185,fe[he++]=n>>8,fe[he++]=255&n):(fe[he++]=186,ce.setUint32(he,n),he+=4),a.keyMap)for(let[e,t]of r)w(a.encodeKey(e)),w(t);else for(let[e,t]of r)w(e),w(t);else{for(let e=0,t=te.length;e<t;e++)if(r instanceof re[e]){let t=te[e],n=t.tag;return null==n&&(n=t.getTag&&t.getTag.call(this,r)),n<24?fe[he++]=192|n:n<256?(fe[he++]=216,fe[he++]=n):n<65536?(fe[he++]=217,fe[he++]=n>>8,fe[he++]=255&n):n>-1&&(fe[he++]=218,ce.setUint32(he,n),he+=4),void t.encode.call(this,r,w,A)}if(r[Symbol.iterator]){if(ue){let e=new Error("Iterable should be serialized as iterator");throw e.iteratorNotHandled=!0,e}fe[he++]=159;for(let e of r)w(e);return void(fe[he++]=255)}if(r[Symbol.asyncIterator]||ve(r)){let e=new Error("Iterable/blob should be serialized as iterator");throw e.iteratorNotHandled=!0,e}if(this.useToJSON&&r.toJSON){const e=r.toJSON();if(e!==r)return w(e)}m(r,!r.hasOwnProperty)}}else fe[he++]=246;else if("boolean"===s)fe[he++]=r?245:244;else if("bigint"===s){if(r<BigInt(1)<<BigInt(64)&&r>=0)fe[he++]=27,ce.setBigUint64(he,r);else if(r>-(BigInt(1)<<BigInt(64))&&r<0)fe[he++]=59,ce.setBigUint64(he,-r-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(r+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");fe[he++]=251,ce.setFloat64(he,Number(r))}he+=8}else{if("undefined"!==s)throw new Error("Unknown type: "+s);fe[he++]=247}},m=!1===this.useRecords?this.variableMapSize?e=>{let t=Object.keys(e),r=Object.values(e),n=t.length;if(n<24?fe[he++]=160|n:n<256?(fe[he++]=184,fe[he++]=n):n<65536?(fe[he++]=185,fe[he++]=n>>8,fe[he++]=255&n):(fe[he++]=186,ce.setUint32(he,n),he+=4),a.keyMap)for(let e=0;e<n;e++)w(a.encodeKey(t[e])),w(r[e]);else for(let e=0;e<n;e++)w(t[e]),w(r[e])}:(e,r)=>{fe[he++]=185;let n=he-t;he+=2;let s=0;if(a.keyMap)for(let t in e)(r||e.hasOwnProperty(t))&&(w(a.encodeKey(t)),w(e[t]),s++);else for(let t in e)(r||e.hasOwnProperty(t))&&(w(t),w(e[t]),s++);fe[n+++t]=s>>8,fe[n+t]=255&s}:(e,t)=>{let r,i,o,a=s.transitions||(s.transitions=Object.create(null)),l=0,f=0;if(this.keyMap){o=Object.keys(e).map((e=>this.encodeKey(e))),f=o.length;for(let e=0;e<f;e++){let t=o[e];r=a[t],r||(r=a[t]=Object.create(null),l++),a=r}}else for(let n in e)(t||e.hasOwnProperty(n))&&(r=a[n],r||(1048576&a[ge]&&(i=65535&a[ge]),r=a[n]=Object.create(null),l++),a=r,f++);let c=a[ge];if(void 0!==c)c&=65535,fe[he++]=217,fe[he++]=c>>8|224,fe[he++]=255&c;else{if(o||(o=a.__keys__||(a.__keys__=Object.keys(e))),void 0===i?(c=s.nextId++,c||(c=0,s.nextId=1),c>=256&&(s.nextId=(c=u)+1)):c=i,s[c]=o,!(c<u)){if(a[ge]=c,ce.setUint32(he,3655335680),he+=3,l&&(g+=b*l),p.length>=256-u&&(p.shift()[ge]=void 0),p.push(a),me(f+2),w(57344+c),w(o),null===t)return;for(let r in e)(t||e.hasOwnProperty(r))&&w(e[r]);return}fe[he++]=217,fe[he++]=c>>8|224,fe[he++]=255&c,a=s.transitions;for(let e=0;e<f;e++)(void 0===a[ge]||1048576&a[ge])&&(a[ge]=c),a=a[o[e]];a[ge]=1048576|c,n=!0}if(f<24?fe[he++]=128|f:me(f),null!==t)for(let r in e)(t||e.hasOwnProperty(r))&&w(e[r])},A=e=>{let r;if(e>16777216){if(e-t>le)throw new Error("Encoded buffer would be larger than maximum buffer size");r=Math.min(le,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else r=1+(Math.max(e-t<<2,fe.length-1)>>12)<<12;let n=new oe(r);return ce=new DataView(n.buffer,0,r),fe.copy?fe.copy(n,0,t,e):n.set(fe.slice(t,e)),he-=t,t=0,de=n.length-10,fe=n};let v=100,k=1e3;function*U(e,r,n){let s=e.constructor;if(s===Object){let t=!1!==a.useRecords;t?m(e,null):be(Object.keys(e).length,160);for(let n in e){let s=e[n];t||w(n),s&&"object"==typeof s?r[n]?yield*U(s,r[n]):yield*M(s,r,n):w(s)}}else if(s===Array){let n=e.length;me(n);for(let s=0;s<n;s++){let n=e[s];n&&("object"==typeof n||he-t>v)?r.element?yield*U(n,r.element):yield*M(n,r,"element"):w(n)}}else if(e[Symbol.iterator]){fe[he++]=159;for(let n of e)n&&("object"==typeof n||he-t>v)?r.element?yield*U(n,r.element):yield*M(n,r,"element"):w(n);fe[he++]=255}else ve(e)?(be(e.size,64),yield fe.subarray(t,he),yield e,O()):e[Symbol.asyncIterator]?(fe[he++]=159,yield fe.subarray(t,he),yield e,O(),fe[he++]=255):w(e);n&&he>t?yield fe.subarray(t,he):he-t>v&&(yield fe.subarray(t,he),O())}function*M(e,r,n){let s=he-t;try{w(e),he-t>v&&(yield fe.subarray(t,he),O())}catch(i){if(!i.iteratorNotHandled)throw i;r[n]={},he=t+s,yield*U.call(this,e,r[n])}}function O(){v=k,a.encode(null,Re)}function S(e,t,r){return v=t&&t.chunkThreshold?k=t.chunkThreshold:100,e&&"object"==typeof e?(a.encode(null,Re),r(e,a.iterateProperties||(a.iterateProperties={}),!0)):[a.encode(e)]}async function*j(e,t){for(let r of U(e,t,!0)){let e=r.constructor;if(e===ae||e===Uint8Array)yield r;else if(ve(r)){let e,t=r.stream().getReader();for(;!(e=await t.read()).done;)yield e.value}else if(r[Symbol.asyncIterator])for await(let e of r)O(),e?yield*j(e,t.async||(t.async={})):yield a.encode(e);else yield r}}this.encodeAsIterable=function(e,t){return S(e,t,U)},this.encodeAsAsyncIterable=function(e,t){return S(e,t,j)}}useBuffer(e){fe=e,ce=new DataView(fe.buffer,fe.byteOffset,fe.byteLength),he=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let t=this.structures.slice(0),r=new we(t,this.sharedValues,this.sharedVersion),n=this.saveShared(r,(t=>(t&&t.version||0)==e));return!1===n?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):t.forEach(((e,t)=>this.structures[t]=e)),n}}({useRecords:!1});je.encode,je.encodeAsIterable,je.encodeAsAsyncIterable;const{NEVER:Ee,ALWAYS:Ie,DECIMAL_ROUND:Ve,DECIMAL_FIT:xe}={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},Be=512,_e=1024,Re=2048;self.veduz=self.veduz||{},self.veduz.cborx=e.default})();